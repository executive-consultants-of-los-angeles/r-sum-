---
- name: "psql"
  hosts: mpsql
  tasks:
    - name: "start psql"
      supervisorctl:
        state: "present"
        name: "psql"
- name: "add host"
  hosts: mrsum
  tasks:
    - name: "add mpsql to hosts file"
      command: "echo '{{ hostvars['mpsql']['ansible_default_ipv4']['address'] }} mpsql' >> /etc/hosts; touch /tmp/done"
      args:
        creates: /tmp/done
- name: "converge"
  hosts: mrsum
  roles:
    - role:
        "rsum"
...
# vim: ft=ansible:
